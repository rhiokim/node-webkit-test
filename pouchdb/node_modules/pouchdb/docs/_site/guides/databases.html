<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Working with databases</title>
    <link rel="stylesheet" href="/static/css/pouchdb.css" />
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-42479701-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700|Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon"/>
  </head>

  <body data-spy="scroll" data-target="#sidebar">

    <header>

      <a href="https://github.com/pouchdb/pouchdb" target="_blank">
         <div class="ribbon">GitHub</div>
      </a>

      <div class="container">

        <a class="logo" href="/">
          <div class="logo-img"></div>
          <span class='logo-type'>PouchDB</span>
        </a>

        <ul class='nav nav-header nav-pills'>
          <li>
            <a class='btn btn-link btn-lg' href="/blog/">Blog</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/guides/">Guides</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/api.html">API</a>
          </li>
          <li>
            <a class='btn btn-link btn-lg' href="/learn.html">Learn</a>
          </li>
          <li>
            <a
                class='btn btn-primary btn-lg'
                href="https://github.com/daleharvey/pouchdb/releases/download/3.0.5/pouchdb-3.0.5.min.js"
            >
                Download <strong>v3.0.5</strong>
            </a>
          </li>
        </ul>

      </div>

    </header>
    
      <div class="page-head">

        <div class="container">

          <h1>Working with databases</h1>
          

        </div>

      </div>
    


    <article>
  <div class="container">
    <div class="row">
        <div id="sidebar" class="col-sm-3">
          <div data-spy="affix" data-offset-top="214" data-offset-bottom="450">
            <ul class="nav nav-silent nav-sidebar">
              

    
    
        
    
    <li >
    <a href="/guides/">Intro</a>
</li>


    
    
    <li >
    <a href="/guides/setup-couchdb.html">Setting up CouchDB</a>
</li>


    
    
    <li >
    <a href="/guides/setup-pouchdb.html">Setting up PouchDB</a>
</li>


    
    
    <li  class="active" >
    <a href="/guides/databases.html">Working with databases</a>
</li>


    
    
    <li >
    <a href="/guides/documents.html">Working with documents</a>
</li>


    
    
    <li >
    <a href="/guides/async-code.html">Asynchronous code</a>
</li>


    
    
        
    
    <li >
    <a href="/guides/updating-deleting.html">Updating/deleting documents</a>
</li>


    
    
    <li >
    <a href="/guides/bulk-operations.html">Bulk operations</a>
</li>


    
    
    <li >
    <a href="/guides/attachments.html">Working with attachments</a>
</li>


    
    
    <li >
    <a href="/guides/replication.html">Replication</a>
</li>



            </ul>
          </div>
        </div>

        <div class="col-sm-9">
          <p>PouchDB databases come in two flavors: local and remote.</p>

<h2>Local databases</h2>

<p>To create a local database, you simply call <code>new PouchDB</code> and give it a name:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PouchDB</span><span class="p">(</span><span class="s1">&#39;kittens&#39;</span><span class="p">);</span>
</code></pre></div>
<p>You can see a <strong><a href="http://bl.ocks.org/nolanlawson/bddac54b92c2d8d39241">live example</a></strong> of this code.</p>

<div class="alert alert-info">


<div class="alert-text">


<strong>Protip:</strong> whenever you see a live example in this guide, you can download it to follow along at home! For example, to run this example, just enter the following commands in your command prompt:
<p/>
<code>
<br/>git clone https://gist.github.com/bddac54b92c2d8d39241.git kittens
<br/>cd kittens
<br/>python -m SimpleHTTPServer
</code>
<p/>
Now the site is up and running at <a href='http://localhost:8000'>http://localhost:8000</a>. To find the correct `gist.github.com` URL, just click the "block" number at the top of the page.

</div>

<p></div></p>

<h2>Remote databases</h2>

<p>To create a remote database, you call <code>new PouchDB</code> and give it a path to a database in CouchDB.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PouchDB</span><span class="p">(</span><span class="s1">&#39;http://localhost:5984/kittens&#39;</span><span class="p">);</span>
</code></pre></div>
<p>The structure of a CouchDB URL is very simple:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">http://     localhost:5984     /kittens
⌞_____⌟     ⌞____________⌟      ⌞_____⌟
   |              |                |
Protocol     Where CouchDB       database
(https if    itself is           name
Cloudant)    hosted
</code></pre></div>
<p>If the remote database doesn&#39;t exist, then PouchDB will create it for you.</p>

<p>You can verify that your database is working by visiting the URL  <a href="http://localhost:5984/kittens">http://localhost:5984/kittens</a>.  You should see something like this:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;db_name&quot;</span><span class="o">:</span><span class="s2">&quot;kittens&quot;</span><span class="p">,</span><span class="s2">&quot;doc_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;doc_del_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;purge_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;compact_running&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;disk_size&quot;</span><span class="o">:</span><span class="mi">79</span><span class="p">,</span><span class="s2">&quot;data_size&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;instance_start_time&quot;</span><span class="o">:</span><span class="s2">&quot;1410722558431975&quot;</span><span class="p">,</span><span class="s2">&quot;disk_format_version&quot;</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="s2">&quot;committed_update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span>
</code></pre></div>
<p>If instead you see:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="o">:</span><span class="s2">&quot;not_found&quot;</span><span class="p">,</span><span class="s2">&quot;reason&quot;</span><span class="o">:</span><span class="s2">&quot;no_db_file&quot;</span><span class="p">}</span>
</code></pre></div>
<p>Then check to make sure that your remote PouchDB has started up correctly. Common errors (such as CORS) are <a href="/errors.html">listed here</a>.</p>

<h2>Get basic info about the database</h2>

<p>You can see basic information about the database by using the <code>info()</code> method.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">db</span><span class="p">.</span><span class="nx">info</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">info</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">info</span><span class="p">);</span>
<span class="p">})</span>
</code></pre></div>
<p>The local database should show something like:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;doc_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;db_name&quot;</span><span class="o">:</span><span class="s2">&quot;kittens&quot;</span><span class="p">}</span>
</code></pre></div>
<p>The remote database may have a bit more information:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">{</span><span class="s2">&quot;db_name&quot;</span><span class="o">:</span><span class="s2">&quot;kittens&quot;</span><span class="p">,</span><span class="s2">&quot;doc_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;doc_del_count&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;purge_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;compact_running&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;disk_size&quot;</span><span class="o">:</span><span class="mi">79</span><span class="p">,</span><span class="s2">&quot;data_size&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;instance_start_time&quot;</span><span class="o">:</span><span class="s2">&quot;1410722558431975&quot;</span><span class="p">,</span><span class="s2">&quot;disk_format_version&quot;</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span><span class="s2">&quot;committed_update_seq&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">}</span>
</code></pre></div>
<p>The most important bits of information are:</p>

<ul>
<li><code>doc_count</code>: the number of undeleted documents in the database</li>
<li><code>db_name</code>: the name of the database</li>
</ul>

<h2>Debugging your local database</h2>

<p>When you create a local PouchDB, you can use the developer tools to see what the database looks like under the hood.</p>

<p>In Chrome, just choose <em>Overflow icon</em> &#9776; &#8594; <em>Tools</em> &#8594; <em>Developer Tools</em>. Then click the <em>Resources</em> tab, then <em>IndexedDB</em>, and you should see the following:</p>

<p><img src="/static/img/dev_tools.png" alt="Chrome Developer Tools" style="width:100%"/></p>

<p>This is the raw IndexedDB representation of your PouchDB, so it may be a little fine-grained compared to what PouchDB shows. However, it&#39;s great for quick debugging.</p>

<p>In Safari &lt;8, the <code>kittens</code> database will be under <em>WebSQL</em> instead of <em>IndexedDB</em>.</p>

<h2>Differences between the local and remote databases</h2>

<p>When you create a local PouchDB database, it uses whatever underlying datastore is available - IndexedDB in most browsers, WebSQL in older browsers, and LevelDB in Node.js.</p>

<p>When you create a remote PouchDB database, it communicates directly with the remote database &ndash; CouchDB, Cloudant, Couchbase, etc.</p>

<p>The goal of PouchDB is to allow you to seamlessly communicate with one or the other. You should not notice many differences between the two, except that of course the local one is much faster!</p>

<h2>Next</h2>

<p>Now that you&#39;ve created some databases, let&#39;s put some documents in &#39;em!</p>




    

    

    

    
        
        

        <ul class="pager">
            
                <li class="previous">
                    <a href="/guides/setup-pouchdb.html">&larr; Setting up PouchDB</a>
                </li>
            
            
                <li class="next">
                    <a href="/guides/documents.html">Working with documents &rarr;</a>
                </li>
            
        </ul>
    

    

    

    

    

    

    


        <div>

    </div>

  </div>

</article>


    <div class="icons">

      <div class="container">

        <div class="row">

          <div class='col-xs-4 col-md-offset-0 col-md-2'>
            <a href='https://twitter.com/pouchdb' target='_blank'>
              <div class="icon icon-twitter"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://github.com/rvagg/node-levelup' target='_blank'>
              <div class="icon icon-leveldb"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://github.com/pouchdb/pouchdb' target='_blank'>
              <div class="icon icon-github"></div>
            </a>
            </div>

          <div class='col-xs-4 col-md-offset-0 col-md-2'>
            <a href='https://travis-ci.org/pouchdb/pouchdb' target='_blank'>
              <div class="icon icon-travis"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='http://couchdb.apache.org/' target='_blank'>
              <div class="icon icon-couchdb"></div>
            </a>
          </div>

          <div class='col-xs-4 col-md-2'>
            <a href='https://saucelabs.com' target='_blank'>
              <div class="icon icon-saucelabs"></div>
            </a>
          </div>

        </div>

      </div>

    </div>

    <footer class="footer">

      <div class="container">

        <div class="row">

          <div class='col-sm-3'>
            <h3 class="nav-head">Learn</h3>
            <ul class='nav nav-silent'>
              <li><a href="/getting-started.html">Getting Started</a></li>
              <li><a href="/api.html">API Guide</a></li>
              <li><a href="https://github.com/daleharvey/pouchdb/wiki">Wiki</a></li>
            </ul>
          </div>

          <div class='col-sm-3'>
            <h3 class="nav-head">Discuss</h3>
            <ul class='nav nav-silent'>
              <li><a href="https://groups.google.com/forum/#!forum/pouchdb">Mailing List</a></li>
              <li><a href="irc://freenode.net/#pouchdb">IRC</a></li>
              <li><a href="http://twitter.com/pouchdb">Twitter</a></li>
              <li><a href="http://stackoverflow.com/questions/tagged/pouchdb">StackOverflow</a></li>
            </ul>
          </div>

          <div class='col-sm-3'>
            <h3 class="nav-head">Contribute</h3>
            <ul class='nav nav-silent'>
              <li><a href="https://github.com/daleharvey/pouchdb/blob/master/CONTRIBUTING.md">Contributing</a></li>
              <li><a href="https://github.com/daleharvey/pouchdb">Source</a></li>
              <li><a href="https://github.com/daleharvey/pouchdb/issues">Issues</a></li>
              <li><a href="https://github.com/daleharvey/pouchdb/blob/master/LICENSE">Apache License</a></li>
            </ul>
          </div>

        </div>

      </div>

    </footer>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  </body>
</html>
